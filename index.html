<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Password Generator</title>
<style>
  body, html {
    margin: 0; padding: 0; height: 100%;
    font-family: Arial, sans-serif;
  }
  .container {
    display: flex;
    height: 100vh;
  }
  .left-panel {
    background-color: #000;
    color: #ffffffff;
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 2.5em;
    font-weight: bold;
  }
  .left-panel .lock-icon {
    margin-right: 15px;
  }
  .right-panel {
    background: linear-gradient(135deg, #d9e4e4, #ebf3f8);
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 30px 20px;
    border-top-left-radius: 15px;
    border-bottom-left-radius: 15px;
    box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.15);
    color: #fff;
  }
  input[type="number"], input[type="text"] {
    width: 350px;
    padding: 8px 12px;
    margin: 12px 0;
    font-size: 16px;
    font-weight: 600;
    text-align: center;
    border: none;
    border-radius: 10px;
    box-shadow: 0 3px 6px rgba(0,0,0,0.1);
    outline: none;
    transition: box-shadow 0.3s ease;
    background: rgba(255, 255, 255, 0.9);
    color: rgb(59, 55, 55);
  }

  input::placeholder {
    color: #a09a9a; /* ðŸ‘ˆ grey placeholder */
  }

  input[type="number"]:focus, input[type="text"]:focus {
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.6);
  }
  .checkbox-group {
    margin-top: 20px;
    width: 350px;
    color: #777272;

  }
  .checkbox-group label {
    font-weight: 700;
    display: flex;
    align-items: center;
    margin-bottom: 8px;
    cursor: pointer;
    user-select: none;
  }
  .checkbox-group input[type="checkbox"] {
    margin-right: 10px;
    width: 18px;
    height: 18px;
    cursor: pointer;
    accent-color: #000102;
  }
  .generated-password {
    margin: 15px 0;
    font-family: 'Courier New', Courier, monospace;
    font-size: 1.2em;
    background: rgba(255, 255, 255, 0.85);
    padding: 12px;
    width: 350px;
    text-align: center;
    user-select: all;
    border-radius: 12px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    color: #222;
    word-break: break-all;
    white-space: pre-wrap;
  }
  .buttons-row {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-top: 15px;
    width: 350px;
  }
  .buttons-row button {
    flex: 1;
    padding: 12px 0;
    font-size: 16px;
    font-weight: 700;
    color: #fff;
    border: none;
    border-radius: 12px;
    background: linear-gradient(90deg, #a3a1a1, #686767);
    box-shadow: 0 4px 8px rgba(213, 215, 216, 0.5);
    transition: background 0.3s ease, box-shadow 0.3s ease;
    cursor: pointer;
  }
  .buttons-row button:hover {
    background: linear-gradient(90deg, #000000, #333333);
    box-shadow: 0 6px 12px rgba(151, 162, 173, 0.7);
  }

   #passwordOutput {
    font-weight: bold;    /* bold */
    font-size: 20px;        /* bigger text */
    font-family: Arial, sans-serif; /* change font */
    color: rgb(59, 55, 55);
   }

</style>
</head>
<body>
  <div class="container">
    <div class="left-panel">
      <span class="lock-icon">ðŸ”’</span>Create Password
    </div>
    <div class="right-panel">
      <input id="lengthInput" type="number" min="4" max="64" placeholder="Enter password length" />
      <div class="checkbox-group">
        <label><input type="checkbox" id="uppercaseCheckbox"  /> Include Uppercase</label>
        <label><input type="checkbox" id="numbersCheckbox" /> Include Numbers</label>
        <label><input type="checkbox" id="specialCheckbox" /> Include Special Characters</label>
      </div>
      <input id="wordInput" type="text" placeholder="Enter your favorite pet, food, or word" />
      <div class="buttons-row">
        <button id="generateBtn">Generate Password</button>
        <button id="copyBtn">Copy</button>
      </div>
      <div id="passwordOutput" class="generated-password" readonly></div>
    </div>
  </div>

<script>
  const lengthInput = document.getElementById('lengthInput');
  const uppercaseCheckbox = document.getElementById('uppercaseCheckbox');
  const numbersCheckbox = document.getElementById('numbersCheckbox');
  const specialCheckbox = document.getElementById('specialCheckbox');
  const wordInput = document.getElementById('wordInput');
  const generateBtn = document.getElementById('generateBtn');
  const passwordOutput = document.getElementById('passwordOutput');
  const copyBtn = document.getElementById('copyBtn');



  const lowerChars = 'abcdefghijklmnopqrstuvwxyz';
  const upperChars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
  const numberChars = '0123456789';
  const specialChars = '!@#$%^&*()_+[]{}|;:,.<>?';

  function shuffleString(str) {
    let arr = str.split('');
    for (let i = arr.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr.join('');
  }

  function getRandomChar(charset) {
    return charset[Math.floor(Math.random() * charset.length)];
  }

  function generatePassword(length, useUpper, useNumber, useSpecial, baseWord) {
    if (length < 1) return '';

    // Build base allowed charset
    let charset = lowerChars;
    if (useUpper) charset += upperChars;
    if (useNumber) charset += numberChars;
    if (useSpecial) charset += specialChars;

    // If no checkbox selected and no base word, invalid
    if (charset.length === 0 && !baseWord) return '';

    let passwordChars = [];

    // Add base word letters first (filtered to allowed charset)
    if (baseWord) {
      // Only keep chars from baseWord that are in allowed charset (case-insensitive check)
      const allowedCharsSet = new Set(charset.toLowerCase() + charset.toUpperCase());
      let filteredBaseWord = '';
      for (let ch of baseWord) {
        if (allowedCharsSet.has(ch) || allowedCharsSet.has(ch.toLowerCase()) || allowedCharsSet.has(ch.toUpperCase())) {
          filteredBaseWord += ch;
        }
      }
      // Use filteredBaseWord or original baseWord to keep letters for password
      passwordChars = filteredBaseWord.split('');
    }

    // Ensure length is at least the passwordChars length
    if (passwordChars.length > length) {
      // Truncate passwordChars if longer than length
      passwordChars = passwordChars.slice(0, length);
    }

    // Ensure each selected type is represented at least once 
    // if not already in passwordChars, append one random char of that type
    function hasCharFromSet(arr, setStr) {
      return arr.some(ch => setStr.includes(ch));
    }

    if (useUpper && !hasCharFromSet(passwordChars, upperChars)) {
      passwordChars.push(getRandomChar(upperChars));
    }
    if (useNumber && !hasCharFromSet(passwordChars, numberChars)) {
      passwordChars.push(getRandomChar(numberChars));
    }
    if (useSpecial && !hasCharFromSet(passwordChars, specialChars)) {
      passwordChars.push(getRandomChar(specialChars));
    }

    // Fill the remaining length with random chars from charset
    while (passwordChars.length < length) {
      passwordChars.push(getRandomChar(charset));
    }

    // Shuffle result to distribute chars
    return shuffleString(passwordChars.join(''));
  }

  generateBtn.addEventListener('click', () => {
    const length = parseInt(lengthInput.value, 10);
    if (isNaN(length) || length < 4 || length > 64) {
      alert('Please enter a valid password length between 4 and 64.');
      return;
    }
    const baseWord = wordInput.value.trim();

    // Check if at least one character type is selected or baseWord is non-empty
    if (!(uppercaseCheckbox.checked || numbersCheckbox.checked || specialCheckbox.checked) && !baseWord) {
      alert('Please select at least one character type or enter a base word.');
      return;
    }

    const password = generatePassword(
      length,
      uppercaseCheckbox.checked,
      numbersCheckbox.checked,
      specialCheckbox.checked,
      baseWord
    );

    if (!password) {
      alert('Unable to generate password with current selections.');
      return;
    }
    passwordOutput.textContent = password;
  });

copyBtn.addEventListener('click', () => {
    if (!passwordOutput.textContent) return;
    navigator.clipboard.writeText(passwordOutput.textContent)
      .then(() => {
        alert('Password copied to clipboard!');
      })
      .catch(() => {
        alert('Failed to copy password.');
      });
  });

  // --- placeholder vanish + reappear logic ---
  const inputs = document.querySelectorAll("input");

  inputs.forEach(input => {
    input.addEventListener("focus", () => {
      input.dataset.placeholder = input.placeholder;
      input.placeholder = "";
    });

    input.addEventListener("blur", () => {
      if (input.value === "") {
        input.placeholder = input.dataset.placeholder;
      }
    });
  });
</script>
</body>

</html>
